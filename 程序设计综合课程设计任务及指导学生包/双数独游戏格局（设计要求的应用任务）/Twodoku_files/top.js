duelId=TID=0,IsYB=CoopID=coopTML=isCompact=0,GV3="",AfterRegFunction=void(IsTNM=NoCraft=LastTouchDist=PUID=0),GameTimer=0,GameTimerStop=IsGameStarted=!1,"undefined"==typeof StartGameTime&&(StartGameTime=new Date),ScrollTimer=void(GameTimerAdd=0),TermsChecked=CheckFreeSpaceTimer=DisableScrol=!1,SF2=SF1=UnWide=ScrollObject=void(DisableFixScrol=0),FavStat="off",SiteVersion="",IsFrame=!1,AjaxTagInput=TimetID=void 0,LoadString='<img id="loadindicator" src="https://grandgames.net/img/load.gif" alt="Loading...">',TempLink=NowTagText=LastTagText="",IsAB=!(NowTagTextEnd=NowTagTextStart=TagPosY=TagPosX=CurUser=0),SmileTarget=UniDesc=void 0,IsAB=IsABR=FooterLoaded=!(PostAccess=1),LastMesID=NowPageID=RBlock=0,Comet=!1,socket=!1,WSFuncs={},GSCanShow=!(IsSuc=Disab=!(NoSoundInit=CanShowMes=!(NoReload=LastGfunc=WSTryConnect=!(nodeFuncs={})))),GlobalAppMode=0,EXFSmall=10,EXFNormal=18,SiteConfig=void 0,FBHided=!1,AppVersion=NoSound=0;var Sound=new Audio;function startStreamWatch(e){"function"==typeof watchStreamPrepare&&watchStreamPrepare(),watchStreamEnabled=!0,$("#streaminfo").show(),chatEnter(),wsSend({m:"agwatch",agid:GGID,uid:e})}function wsSend(e){if(Comet)try{"object"==typeof e&&(e=JSON.stringify(e)),socket.send(e)}catch(e){}else setTimeout(function(){wsSend(e)},1e3)}function WSBind(e,t){0<UIND&&(Comet?(WSFuncs[e]=t,socket.send(e)):setTimeout(function(){WSBind(e,t)},2e3))}function startStream(){if(watchStreamEnabled)return!1;sendStreamEnabled?(sendStreamEnabled=!1,$("#streamBut").removeClass("animbut")):(sendProgressEnabled=!0,sendStreamEnabled=!0,$("#streamBut").addClass("animbut"),PushWindow("streamstarted"),chatEnter())}function sendProgress(e,t="",o=0,n=""){sendProgressEnabled&&Comet&&GGID&&UIND&&wsSend({m:"agsend",agid:GGID,uid:UIND,proc:e,mask:t,sx:o,save:n,login:UserLogin})}function windowHeight(){return innerHeight}function screenHeight(){return screen.height}function windowWidth(){return innerWidth}function screenWidth(){return screen.width}function isNumber(e){return!isNaN(parseFloat(e))&&isFinite(e)}function saveLastSerch(){var e=location.href;localStorage.setItem("lastsearch",e)}function checkCompact(){var e;isCompact=0,$(document).width()<=972&&(e=localStorage.getItem("iscompact"),isCompact=null===e?0:Number(e),$("#iscompact").length&&(isCompact&&$("#iscompact").attr("checked","checked"),$("#iscompact_c").show()))}function addCompactButton(){0==$("#cmpct").length&&$("div[abbr=buttons]").prepend('<button title="Compact Mode" class="onlysmall nocompact" id="cmpct" onclick="isCompact=1;StartCompact();"><img src="/img/icon/compact.png" class="but_img" alt="" /></button>')}function StartCompact(){var e,t,o,n,i,a;isCompact&&(console.log("gg_hidebnav"),IsFrame=!0,$("body").addClass("compact"),e=screenWidth()<screenHeight(),a=0,$(".toframebuttons").each(function(){e&&$(this).hasClass("show_portrait")?$(this).removeClass("toframebuttons"):(a++,t=$(this).attr("abbr"),void 0===(o=$(this).attr("rel"))&&(o=t),void 0===(n=$(this).attr("id"))&&(n="tfb_"+a,$(this).attr("id",n)),"buttons"===t&&$(this).find("button").each(function(){var e,t;i=this.id,$(this).hasClass("noframe")||("Undo();"==$(this).attr("onclick")?$("#leftmenubut").after('<button onclick="Undo();"><img src="https://grandgames.net/img/app/32/undo.png?4"></button>'):(e=$(this).attr("rel"),void 0===(e="rulesbut"===i?"rulesbut":e)||void 0!==(t=$(this).attr("onclick"))&&$("#leftmenubut").after('<button onclick="'+t+'"><img src="https://grandgames.net/img/app/32/'+e+'.png?4"></button>')))}),void 0!==o&&(t=$(this).attr("title"),$(this).attr("onclick"),void 0===t&&(t=""),$("#leftmenubut").after('<button class="top_frame_button" title="'+t+'" onclick="ShowFramePanel(\''+n+'\').toggle();"><img src="https://grandgames.net/img/app/32/'+o+'.png?4"></button>')))}),$("body.compact .toframebuttons button").on("mouseup",function(){$(".toframebuttons").hide()}),setTimeout(function(){$(window).resize()},100))}function ShowFramePanel(e){$("#left_panel").hide();var t=$("#"+e).is(":hidden");$(".toframebuttons").hide(),t&&$("#"+e).show()}function ShowADDForm(t,e,o,n){var i,a="add_ta_"+t,r="add_kmn_"+t;i=2==n?"#msgs_":"#msg_","edit"===o?jQuery(i+t).html('<div class="add_kmn" id="'+r+'"></div>'):jQuery("#tr_"+t).append('<div class="add_kmn" id="'+r+'"></div>'),"moder"==o&&(o=0,"undefined"==typeof PuzzleID&&(PuzzleID=0),"undefined"==typeof currentURL&&(currentURL=""),$.post("/actions.php",{mode:"moderlist",url:currentURL,id:PuzzleID,domid:t},function(e){jQuery("#"+r).prepend(e)}));var s=jQuery("#"+r);0<!jQuery("#"+a).length?(jQuery(s).empty(),NewActions({mode:"commentbody",mde:o,obj:a,id:t,mda:n,url:e},function(e){jQuery(s).append(e.message),"edit"===o?jQuery.post("/actions.php",{id:t,mode:"getpostsource",md:n},function(e){jQuery("#"+a).val(e),jQuery(s).show()}):jQuery(s).show("slow")})):jQuery(s).remove()}function InitSiteConfig(){if(void 0===SiteConfig)if(SiteConfig=localStorage.getItem("siteconfig"),null===SiteConfig||void 0===SiteConfig)SiteConfig={};else try{SiteConfig=JSON.parse(SiteConfig)}catch(e){SiteConfig={}}}function GetConfig(e,t){return InitSiteConfig(),void 0!==SiteConfig[e]?SiteConfig[e]:void 0!==t?t:0}function SetConfig(e,t){InitSiteConfig(),SiteConfig[e]=t;return localStorage.setItem("siteconfig",JSON.stringify(SiteConfig)),!0}function NewActions(e,t,o,n){var i=void 0,a=void 0;void 0!==n&&(Array.isArray(n)?(a=n[0],i=n[1]):a=n);var r,s="";void 0!==i&&!0!==i&&$(i).hide(),void 0!==a&&(!0===i?(s=$(a).get(0).outerHTML,$(a).replaceWith('<img id="na_load_image" src="//grandgames.net/img/newloader.gif" alt="Loading...">'),r=a,a="#na_load_image"):$(a).html('<img src="//grandgames.net/img/newloader.gif" alt="Loading...">')),jQuery.post("/newactions.php",e,function(e){void 0!==i&&!0!==i&&$(i).show(),void 0!==a&&(!0===i?($(a).replaceWith(s),a=r):$(a).html(s));e=JSON.parse(e);e.iserror?void 0!==o&&("function"==typeof o?o(e):1===o?alert(e.message):2===o&&void 0!==a&&$(a).html(e.message)):(void 0!==e.usermoney&&$("#moneys").html(e.usermoney),void 0!==t&&("function"==typeof t?t(e):1===t?alert(e.message):2===t&&void 0!==a&&$(a).html(e.html))),void 0!==e.reloadpage&&location.reload()})}function setCookie(e,t,o,n,i,a){document.cookie=e+"="+escape(t)+(o?"; expires="+o:"")+(n?"; path="+n:"")+(i?"; domain="+i:"")+(a?"; secure":"")}function getCookie(e){var t,o=" "+document.cookie,n=" "+e+"=",i=null,e=0;return 0<o.length&&-1!=(t=o.indexOf(n))&&(-1==(e=o.indexOf(";",t+=n.length))&&(e=o.length),i=unescape(o.substring(t,e))),i}function strpos(e,t,o){return e.indexOf(t,o)}function mousePageXY(e){var t=0,o=0;return(e=e||window.event).pageX||e.pageY?(t=e.pageX,o=e.pageY):(e.clientX||e.clientY)&&(t=e.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft)-document.documentElement.clientLeft,o=e.clientY+(document.documentElement.scrollTop||document.body.scrollTop)-document.documentElement.clientTop),{x:t,y:o}}function randomNumber(e,t){return e=parseInt(e),t=parseInt(t),Math.floor(Math.random()*(t-e+1))+e}function loadCID(){var e=getCookie("japonrucid");null===e?(CID=randomNumber(1e6,9999999),setCookie("japonrucid",CID,"Mon, 01-Jan-2025 00:00:00 GMT")):CID=e}function trim(e){return e.replace(/^\s+|\s+$/g,"")}function RememberFlag(e,t){e=1===e||0===e?e:e.checked?0:1,jQuery.post("/coockie.php",{c:t,n:e})}function ContMenuToggle(e){var t,o,n="#"+$(e).attr("rel");"none"!=$(n).css("display")?$(n).hide("slow"):(t=$(e).offset().left,o=$(e).offset().top+30,$(n).css("top",o),e=$(n).width(),(o=$(document).width())<t+e+30&&(t=o-e-30),$(n).css("left",t),$(n).show())}function SetLocalVal(e,t){return localStorage.setItem(e,t),!0}function GetLocalVal(e,t){e=localStorage.getItem(e);return null===e&&void 0!==t?t:"false"!==e&&("true"===e||e)}function RememberVal(e,t){jQuery.post("/coockie.php",{c:t,n:e})}function GetPX(e){return e=e.replace(/px/g,""),e=parseInt(e)}function div(e,t){return Math.round((e-e%t)/t)}function AppQ(e,t,o){try{return AndroidFunction.GetQ(e,t,o)}catch(e){}}function DecTimeAdd(){ClickSG||(console.log(TimeAdd),TimeAdd--,TimeAdd<15&&(jQuery("#timeradd_but").removeClass("dsbut"),jQuery("#timeradd_but").removeClass("disabled")),jQuery("#timeadd_timer").html(TimeAdd),0<TimeAdd?setTimeout(DecTimeAdd,1e3):StartAfterTimer())}function StartFunc(){console.log("gg_ad_closebn"),IsGameStarted=!0,"undefined"!=typeof startStreamWatchUID&&startStreamWatchUID&&setTimeout(function(){startStreamWatch(startStreamWatchUID)}),$("#timeadd_block").hide(),$("#main_game_div").show(),$(window).resize(),0!==TCID&&clearInterval(TCID),0==isCompact&&setTimeout(()=>{$("html, body").animate({scrollTop:$("#main_game_div").offset().top-$("#top_header").height()},200)},50)}function StartAfterTimer(){var e;$("#iscompact_c").is(":visible")&&(e=$("#iscompact").prop("checked"),isCompact=e?1:0,localStorage.setItem("iscompact",isCompact)),$("#openinapp").length&&$("#openinapp").prop("checked")?(AppQ("OpenLevel",GGID),setTimeout(function(){history.back()})):jQuery("#timeradd_but").hasClass("dsbut")||jQuery("#timeradd_but").hasClass("disabled")||(ClickSG=!0,TimeAdd=0,StartCompact(),isplayag?NewActions({mode:"addtime",id:GGID,uid:CurUser},function(e){StartGameTime=new Date,GameTimerAdd=e.timer,PUID=e.puid,StartFunc()},function(){console.log("err_timer"),StartGameTime=new Date,GameTimerAdd=0,StartFunc()},["#timeradd_but",!0]):StartFunc())}function UndisOnload(e){$(window).on("load",function(){setTimeout(function(){jQuery("#timeadd_img").attr("src","/img/icon/follow.png"),jQuery("#timeradd_but").removeClass("dsbut"),GameAutoStart&&setTimeout(function(){StartAfterTimer()},300)},e)})}NowShot=!(FrameCounter=1),ScreenTopMargin=40,sendProgressEnabled=!1,sendStreamEnabled=!1,watchStreamEnabled=!1,watchStreamFunc=void 0,watchStreamPrepare=void 0,function(i){var g=i.scrollTo=function(e,t,o){i(window).scrollTo(e,t,o)};function e(e){return"object"==typeof e?e:{top:e,left:e}}g.defaults={axis:"xy",duration:1.3<=parseFloat(i.fn.jquery)?0:1},g.window=function(e){return i(window)._scrollable()},i.fn._scrollable=function(){return this.map(function(){var e=this;if(!(!e.nodeName||-1!=i.inArray(e.nodeName.toLowerCase(),["iframe","#document","html","body"])))return e;e=(e.contentWindow||e).document||e.ownerDocument||e;return i.browser.safari||"BackCompat"==e.compatMode?e.body:e.documentElement})},i.fn.scrollTo=function(t,o,p){return"object"==typeof o&&(p=o,o=0),"function"==typeof p&&(p={onAfter:p}),"max"==t&&(t=9e9),p=i.extend({},g.defaults,p),o=o||p.speed||p.duration,p.queue=p.queue&&1<p.axis.length,p.queue&&(o/=2),p.offset=e(p.offset),p.over=e(p.over),this._scrollable().each(function(){var s,c=this,d=i(c),u=t,m={},l=d.is("html,body");switch(typeof u){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(u)){u=e(u);break}u=i(u,this);case"object":(u.is||u.style)&&(s=(u=i(u)).offset())}function f(e){d.animate(m,o,p.easing,e&&function(){e.call(this,t,p)})}i.each(p.axis.split(""),function(e,t){var o="x"==t?"Left":"Top",n=o.toLowerCase(),i="scroll"+o,a=c[i],r=g.max(c,t);s?(m[i]=s[n]+(l?0:a-d.offset()[n]),p.margin&&(m[i]-=parseInt(u.css("margin"+o))||0,m[i]-=parseInt(u.css("border"+o+"Width"))||0),m[i]+=p.offset[n]||0,p.over[n]&&(m[i]+=u["x"==t?"width":"height"]()*p.over[n])):(n=u[n],m[i]=n.slice&&"%"==n.slice(-1)?parseFloat(n)/100*r:n),/^\d+$/.test(m[i])&&(m[i]=m[i]<=0?0:Math.min(m[i],r)),!e&&p.queue&&(a!=m[i]&&f(p.onAfterFirst),delete m[i])}),f(p.onAfter)}).end()},g.max=function(e,t){var o="x"==t?"Width":"Height",n="scroll"+o;if(!i(e).is("html,body"))return e[n]-i(e)[o.toLowerCase()]();t="client"+o,o=e.ownerDocument.documentElement,e=e.ownerDocument.body;return Math.max(o[n],e[n])-Math.min(o[t],e[t])}}(jQuery),jQuery.fn.hasScrollBar=function(){return this.get(0).scrollHeight>this.height()},window.isset=function(e){return null!=e},Array.prototype.in_array=function(e){for(var t=0,o=this.length;t<o;t++)if(this[t]==e)return!0;return!1},ClickSG=!1,TimeAdd=25;